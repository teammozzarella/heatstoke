<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data:; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="http://maps.google.com/maps/api/js?v=3&sensor=true" type="text/javascript" charset="UTF-8"></script>
    <script>
    function getCurrentPosition(){
        navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
    }
    
    function successCallback(position){
        createMap(position);
    }
    function errorCallback(e){
        alert("現在位置取得失敗"+e.code);
    }
    function createMap(position){
        var latlng = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
        
        var option={
            zoom:16,
            center:latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        
        var map = new google.maps.Map(document.getElementById("map"), option);
        
        var marker = new google.maps.Marker({
            position: latlng,
            map: map
        });
    }
    </script>
</head>
<body onLoad="getCurrentPosition();">
    <p>現在位置の表示</p>
    <div id="map"></div>
</body>
</html>
